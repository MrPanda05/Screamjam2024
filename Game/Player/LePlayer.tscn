[gd_scene load_steps=8 format=3 uid="uid://dgvrxd8e3knde"]

[ext_resource type="Script" path="res://Game/Player/LePlayer.cs" id="1_52oj4"]
[ext_resource type="Script" path="res://Game/Player/Head.cs" id="2_y71j6"]
[ext_resource type="PackedScene" uid="uid://c8qd4wluh6kb7" path="res://Commons/FiniteStateMachine/FSM.tscn" id="3_8go6c"]
[ext_resource type="Script" path="res://Game/Player/States/PlayerMovementState.cs" id="4_6jd7v"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_eed75"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_tsnpv"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1qyb1"]

[node name="LePlayer" type="CharacterBody3D" node_paths=PackedStringArray("HeadNode", "FiniteStateMachine") groups=["Player"]]
collision_mask = 12
script = ExtResource("1_52oj4")
Sensitivity = 0.002
HeadNode = NodePath("Head")
FiniteStateMachine = NodePath("FSM")
_gravity = 9.8
_jumpForce = 50.0
_speed = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_eed75")

[node name="Model" type="MeshInstance3D" parent="CollisionShape3D"]
cast_shadow = 0
mesh = SubResource("CapsuleMesh_tsnpv")
skeleton = NodePath("../..")

[node name="Head" type="Node3D" parent="." node_paths=PackedStringArray("_raycast")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0.847731, 0)
script = ExtResource("2_y71j6")
_raycast = NodePath("PlayerCamera/RayCast3D")

[node name="PlayerCamera" type="Camera3D" parent="Head"]
fov = 90.0

[node name="RayCast3D" type="RayCast3D" parent="Head/PlayerCamera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.20914e-08, -0.108785, -0.367082)
target_position = Vector3(0, 0, -1.4)
collision_mask = 2
collide_with_areas = true
collide_with_bodies = false

[node name="InteractorArea" type="Area3D" parent="."]
collision_layer = 64
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractorArea"]
shape = SubResource("CapsuleShape3D_1qyb1")

[node name="FSM" parent="." instance=ExtResource("3_8go6c")]
InitialState = NodePath("PlayerMovement")

[node name="PlayerMovement" type="Node" parent="FSM"]
script = ExtResource("4_6jd7v")
